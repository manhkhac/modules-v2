module.exports.config={name:"allbox",version:"1.0.0",credits:"ManhG",hasPermssion:2,description:"[Ban/Unban/Remove] List[Data] thread bot Ä‘Ã£ tham gia",commandCategory:"Admin",usages:"[sÃ´Ì trang/all]",cooldowns:5},module.exports.handleReply=async function({api:e,event:a,args:n,Threads:s,handleReply:t}){const{threadID:d,messageID:r}=a;if(parseInt(a.senderID)!==parseInt(t.author))return;const o=require("moment-timezone").tz("Asia/Ho_Chi_minh").format("HH:MM:ss L");var g=a.body.split(" "),u=t.groupid[g[1]-1],l=t.groupName[g[1]-1];switch(t.type){case"reply":if("ban"==g[0]||"Ban"==g[0]){const a=(await s.getData(u)).data||{};return a.banned=1,a.dateAdded=o,await s.setData(u,{data:a}),global.data.threadBanned.set(u,{dateAdded:a.dateAdded}),e.sendMessage("Â»ThÃ´ng baÌo tá»« AdminÂ«\n\n NhÃ³m Báº¡n ÄÃ£ BiÌ£ Ban, cÃ¢Ìm duÌ€ng bot.",u,(()=>e.sendMessage(`${e.getCurrentUserID()}`,(()=>e.sendMessage(`â˜…â˜…BanSuccessâ˜…â˜…\n\nðŸ”·${l} \nðŸ”°TID:${u} `,d,(()=>e.unsendMessage(t.messageID)))))))}if("unban"==g[0]||"Unban"==g[0]||"ub"==g[0]||"Ub"==g[0]){const a=(await s.getData(u)).data||{};return a.banned=0,a.dateAdded=null,await s.setData(u,{data:a}),global.data.threadBanned.delete(u,1),e.sendMessage("Â»ThÃ´ng baÌo tá»« AdminÂ«\n\n NhÃ³m Báº¡n ÄÃ£ ÄÆ°Æ¡Ì£c GÆ¡Ìƒ Ban",u,(()=>e.sendMessage(`${e.getCurrentUserID()}`,(()=>e.sendMessage(`â˜…â˜…UnbanSuccessâ˜…â˜…\n\nðŸ”·${l} \nðŸ”°TID:${u} `,d,(()=>e.unsendMessage(t.messageID)))))))}if("del"==g[0]||"Del"==g[0]){const n=(await s.getData(u)).data||{};await s.delData(u,{data:n}),console.log(l),e.sendMessage(`â˜…â˜…DelSuccessâ˜…â˜…\n\nðŸ”·${l} \nðŸ”°TID: ${u} \n XoÌa data thaÌ€nh cÃ´ng!`,a.threadID,a.messageID);break}if("out"==g[0]||"Out"==g[0]){e.sendMessage("Â»ThÃ´ng baÌo tá»« AdminÂ«\n\n â˜…â˜…ÄaÌƒ out khoÌ‰i nhoÌm chatâ˜…â˜…",u,(()=>e.sendMessage(`${e.getCurrentUserID()}`,(()=>e.sendMessage(`â˜…â˜…OutSuccessâ˜…â˜…\n\nðŸ”·${l} \nðŸ”°TID:${u} `,d,(()=>e.unsendMessage(t.messageID,(()=>e.removeUserFromGroup(`${e.getCurrentUserID()}`,u)))))))));break}}},module.exports.run=async function({api:e,event:a,args:n}){var s,t=[],d="";try{s=await e.getThreadList(1e3,null,["INBOX"])}catch(e){console.log(e)}for(const e of s)1==e.isGroup&&t.push({threadName:e.name,threadID:e.threadID,messageCount:e.messageCount});t.sort(((e,a)=>e.messageCount>a.messageCount?-1:e.messageCount<a.messageCount?1:void 0));var r=[],o=[],g=1;(g=parseInt(n[0])||1)<-1&&(g=1);for(var u=1e3,l=(d="ðŸŽ­DS NHOÌM [Data]ðŸŽ­\n\n",Math.ceil(t.length/u)),h=u*(g-1);h<u*(g-1)+u&&!(h>=t.length);h++){let e=t[h];d+=`${h+1}. ${e.threadName}\nðŸ”°TID: ${e.threadID}\nðŸ’ŒMessageCount: ${e.messageCount}\n`,r.push(e.threadID),o.push(e.threadName)}d+=`--Trang ${g}/${l}--\nDÃ¹ng ${global.config.PREFIX}allbox + sÃ´Ì trang/all\n\n`,e.sendMessage(d+"ðŸŽ­Reply Out, Ban, Unban, Del[data] + sá»‘ thá»© tá»± Ä‘á»ƒ Out, Ban, Unban, Del[data] thread Ä‘Ã³!",a.threadID,((e,n)=>global.client.handleReply.push({name:this.config.name,author:a.senderID,messageID:n.messageID,groupid:r,groupName:o,type:"reply"})))};
