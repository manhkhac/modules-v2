module.exports.config={name:"log",eventType:["log:unsubscribe","log:subscribe","log:thread-name"],version:"1.0.0",credits:"Mirai Team",description:"Ghi láº¡i thÃ´ng bÃ¡o cÃ¡c hoáº¡t Ä‘Ã´ng cá»§a bot!",envConfig:{enable:!0}},module.exports.run=async function({api:e,event:a,Users:t,Threads:n}){const o=require("../../utils/log");if(!global.configModule[this.config.name].enable)return;const i=require("moment-timezone").tz("Asia/Ho_Chi_Minh").format("D/MM/YYYY HH:mm:ss"),s=global.data.userName.get(a.author)||await t.getNameUser(a.author);var r="=== Bot Notification ===\n\nðŸ”°Thread ID: "+a.threadID+"\nðŸ¤·â€â™€ï¸HÃ nh Ä‘á»™ng: {task}\nðŸ³TÃªn ngÆ°á»i dÃ¹ng: "+s+"\nâš¡UserID: "+a.author+"\n\nâ°Time: "+i,d="";switch(a.logMessageType){case"log:subscribe":a.logMessageData.addedParticipants.some((e=>e.userFbId==global.data.botID))&&(d="NgÆ°á»i dÃ¹ng Ä‘Ã£ thÃªm bot vÃ o má»™t nhÃ³m má»›i!");break;case"log:unsubscribe":if(a.logMessageData.leftParticipantFbId==global.data.botID){const e=(await n.getData(a.threadID)).data||{};e.banned=!0;e.reason="KiÌch bot tÆ°Ì£ do, khÃ´ng xin pheÌp",e.dateAdded=i,await n.setData(a.threadID,{data:e}),global.data.threadBanned.set(a.threadID,{reason:e.reason,dateAdded:e.dateAdded}),d="NgÆ°á»i dÃ¹ng Ä‘Ã£ kick bot ra khá»i nhÃ³m!"}}return 0!=d.length?(r=r.replace(/\{task}/g,d),e.sendMessage(r,global.config.ADMINBOT[0],((e,a)=>{if(e)return o(r,"[ Logging Event ]")}))):void 0};
